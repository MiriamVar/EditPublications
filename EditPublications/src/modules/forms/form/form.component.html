<div class="publication-wrapper">
    <mat-horizontal-stepper [linear]="isLinear" #stepper>
        <!-- Prva cast (vyplnenie udajov a autoroch)-->
        <mat-step [stepControl]="firstFormGroup">
            <form (ngSubmit)="formSubmit()" [formGroup]="firstFormGroup">
                <ng-template matStepLabel>Informacie o autoroch dokumentu</ng-template>
                <div>
                    <mat-form-field>
                        <input matInput placeholder="DOI číslo (nepovinné)" formControlName="DOI">
                    </mat-form-field>
                </div>
                <div class="rightBtn">
                    <button mat-raised-button color="accent" type="button" (click)="insertFromDOI()">Vyplň</button>
                </div>
                <mat-form-field>
                    <input matInput placeholder="Meno" formControlName="name" required>
                </mat-form-field>
                <mat-form-field>
                    <input matInput placeholder="Priezvisko" formControlName="surname" required>
                </mat-form-field>
                <mat-form-field>
                    <input matInput placeholder="Titul(y)" formControlName="titul" required>
                </mat-form-field>
                <mat-form-field>
                    <input matInput placeholder="%" formControlName="percentage" required>
                </mat-form-field>
                <mat-form-field>
                    <mat-label>Doktorand</mat-label>
                    <mat-select formControlName="doktorand">
                        <mat-option *ngFor="let option of options" [value]="option.value">
                            {{option.viewValue}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
                <mat-form-field>
                    <mat-label>Pracovisko</mat-label>
                    <mat-select formControlName="ustav">
                        <mat-option *ngFor="let workspace of workspaces" [value]="workspace.value">
                            {{workspace.viewValue}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
                <mat-form-field>
                    <input matInput placeholder="Ustav/Katedra" formControlName="department" required>
                </mat-form-field>
                <mat-form-field>
                    <input matInput placeholder="Kontakt(t.c/email)" formControlName="contact" required>
                </mat-form-field>
                <div *ngIf="showAddUser">
                    <p>Dalsi autor</p>
                    <app-form-adduser></app-form-adduser>
                </div>
                <div>
                    <mat-card-actions>
                        <button type="button" mat-raised-button color="accent" (click)="addingAnotherAuthor()">Pridaj autora</button>
                    </mat-card-actions>
                    <button mat-button matStepperNext>Dalej</button>
                </div>
            </form>
        </mat-step>

        <mat-step [stepControl]="secondFormGroup">
            <form [formGroup]="secondFormGroup">
                <ng-template matStepLabel>Informacie o dokumente</ng-template>
                <mat-form-field class="example-full-width">
                    <input matInput placeholder="Nazov dokumentu (uvedený v jazyku dokumentu)" formControlName="documentName" required>
                </mat-form-field>
                <mat-form-field class="example-full-width">
                    <input matInput placeholder="Preklad dokumentu (do angličtiny / slovenčiny - ak je jazyk dokumentu iný ako slovenčina)" formControlName="documentTranslate" required>
                </mat-form-field>

                <mat-form-field class="example-chip-list">
                    <mat-chip-list #chipList aria-label="SlovakWords selection">
                        <mat-chip *ngFor="let word of slovakWords" [selectable]="selectable" [removable]="removable" (removed)="remove(word)">
                            {{word.name}}
                            <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                        </mat-chip>
                        <input placeholder="Kľúčové slová (slovenčina)" [matChipInputFor]="chipList" [matChipInputSeparatorKeyCodes]="separatorKeysCodes" [matChipInputAddOnBlur]="addOnBlur" (matChipInputTokenEnd)="add($event)">
                    </mat-chip-list>
                </mat-form-field>

                <mat-form-field class="example-chip-list">
                    <mat-chip-list #chipList2 aria-label="EnglishWords selection">
                        <mat-chip *ngFor="let word of englishWords" [selectable]="selectable" [removable]="removable" (removed)="remove2(word)">
                            {{word.name}}
                            <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                        </mat-chip>
                        <input placeholder="Kľúčové slová (angličtina)" [matChipInputFor]="chipList2" [matChipInputSeparatorKeyCodes]="separatorKeysCodes" [matChipInputAddOnBlur]="addOnBlur" (matChipInputTokenEnd)="add2($event)">
                    </mat-chip-list>
                </mat-form-field>

                <mat-form-field>
                    <mat-label>Kategória publikačnej činnosti</mat-label>
                    <mat-select formControlName="categoryPub">
                        <mat-option *ngFor="let activity of activities" [value]="activity.value">
                            {{activity.viewValue}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>

                <div formArrayName="researchFieldss">
                    <div *ngFor="let group of researchArray.controls; let i = index" [formGroupName]="i">
                        <div class="next-to-each-other">
                            <mat-form-field>
                                <mat-label>Zvoľte oblasť výskumu</mat-label>
                                <mat-select formControlName="researchF">
                                    <mat-option *ngFor="let researchField of researchFields" [value]="researchField.value">
                                        {{researchField.viewValue}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>

                            <mat-card-actions>
                                <button mat-icon-button color="accent" (click)="removeResearch(i)">
                                    <mat-icon>remove_circle</mat-icon>
                                  </button>
                            </mat-card-actions>
                        </div>
                    </div>
                    <button mat-icon-button color="accent" (click)="addResearch()">
                        <mat-icon>add_circle</mat-icon>
                      </button>
                </div>


                <mat-form-field>
                    <mat-label>Zadajte typ evidovaného dokumentu</mat-label>
                    <mat-select>
                        <mat-option *ngFor="let type of types" [value]="type.value">
                            {{type.viewValue}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
                <mat-form-field class="example-full-width">
                    <input matInput placeholder="Dostupnosť na www (v prípade elektronických dokumentov)" formControlName="webAddress">
                </mat-form-field>


                <div formArrayName="projects">
                    <h3>Pridaj projekty, v ramci ktorych evidovany dokument vznikol (volitelne)</h3>
                    <div *ngFor="let group of projectArray.controls; let i = index;" [formGroupName]="i">
                        <h2>Project {{i+1}}</h2>
                        <div class="next-to-each-other">
                            <mat-form-field>
                                <input matInput placeholder="Názov projektu" formControlName="nameP">
                            </mat-form-field>
                            <mat-form-field>
                                <input matInput placeholder="Číslo projektu" formControlName="numberP">
                            </mat-form-field>
                            <mat-form-field>
                                <mat-label>Grantová schéma</mat-label>
                                <mat-select formControlName="scheme">
                                    <mat-option *ngFor="let grantScheme of gantSchemes" [value]="grantScheme.value">
                                        {{grantScheme.viewValue}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                            <mat-form-field>
                                <input matInput placeholder="Grantová agentúra" formControlName="agency">
                            </mat-form-field>
                            <mat-card-actions>
                                <button mat-icon-button color="accent" (click)="removeProject(i)">
                                    <mat-icon>remove_circle</mat-icon>
                                  </button>
                            </mat-card-actions>
                        </div>
                    </div>
                    <button mat-icon-button color="accent" (click)="addProject()">
                        <mat-icon>add_circle</mat-icon>
                      </button>
                </div>

                <div>
                    <button mat-button matStepperPrevious>Spat</button>
                    <button mat-button matStepperNext>Dalej</button>
                </div>
            </form>
        </mat-step>
        <mat-step>
            <ng-template matStepLabel>Done</ng-template>
            Po odoslaní formulára je potrebné zobrazený informačný hárok vytlačiť a podpísaný doručiť zodpovednému <a href="/employees">pracovníkovi</a> UK UPJŠ.
            <div>
                <button mat-button matStepperPrevious>Back</button>
                <button mat-button (click)="stepper.reset()">Reset</button>
                <button type="submit" mat-raised-button color="accent" (click)="formSubmit()">Send</button>
            </div>
        </mat-step>
    </mat-horizontal-stepper>
</div>